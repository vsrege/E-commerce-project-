<!DOCTYPE html>
<html>
<head>
<title>Era81 Store Account - Stats</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  
  
</head>

<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
    <a href="product.jsp"><img id="logo" src="images/logo.png" alt="era81 logo"/></a>
      
    </div>
    
    <div class="col-md-6">
      <ul class="nav navbar-nav navbar-center" id="menu">
        <li><!-- <a href="#" class="text-uppercase">crowd selection</a> --></li>
        <li><!-- <a href="#" class="text-uppercase">crowd pricing</a> --></li>
        <li class="active"><a href="product.jsp" class="text-uppercase">shop</a></li>
      </ul>
      </div>
      <div class="col-md-2" id="username" align="right" style="margin-top:20px;"></div>
      <div class="col-md-2 dropdown" id="ownerdrop"><!-- style="display:none;" -->
     <button class="dropdown-toggle" data-toggle="dropdown"><img src="images/arrow.png" alt="menu dropdown"/></button>
      <ul class="dropdown-menu">
      <!-- <li><a href="#">My Account</a></li>
      <li><a href="#">My Store Account</a></li>
      <li><a href="#">View My Store</a></li>
      <li><a href="#">Store Stats</a></li>
      <li><a href="#">Listing Manager</a></li>
      <li><a href="#">Finances</a></li>
      <li><a href="#">Store Settings</a></li>
      <li><a href="#">Log out</a></li> -->
      <li><a href="#">My Account</a></li>
      <li><a href="profile.jsp">My Profile & Settings</a></li>
      <li><a href="#">My Orders</a></li>
      <!-- <li><a href="#">My Voting History</a></li>
      <li><a href="#">My Pricing History</a></li> -->
      <li><a href="#">My Wishlist</a></li>
      <li><a href="#" id="logout">Log out</a></li>
      </ul> 
      </div>
   </div> 
  </div>
</nav>
  
<div class="container profileback">
<div class="row">
<form id="userinfo">
    <div class="col-md-12">
    
    <ul class="nav navbar-nav" id="profilemenu">
        <li><a href="profile.jsp"  class="makeactive">My Profile</a></li>
        <li><a href="orderhistory.html" class="makeactive">My Orders</a></li>
        <li><a href="#" class="makeactive">Wish List</a></li>
       
      </ul>
      
    </div>
    
   
     </form>
</div>
 <div class="row orders">
 <form>
 <div id="orderselection" align="center">
 <div class="col-md-6">
 View orders of 
 <span class="statselect">
 <select>
 <option value="0">--Month--</option>
 <option value="Jan">January</option>
 <option value="Feb">February</option>
 <option value="Mar">March</option>
 <option value="Apr">April</option>
 <option value="May">May</option>
 <option value="Jun">June</option>
 <option value="July">July</option>
 <option value="Aug">August</option>
 <option value="Sep">September</option>
 <option value="Oct">October</option>
 <option value="Nov">November</option>
 <option value="Dec">December</option>
 </select>
 </span>
 <span class="statselect">
 <select>
 <option value="0">year</option>
 </select>
 </span>
 </div>

 <div class="col-md-2">Search your orders:</div>
 <span class="col-md-3 searchorder">
 
     <input type="text"  id="ordersearch" placeholder="Enter order details" class="searchorderinput"/>
      <a href="#">
          <span class="glyphicon glyphicon-search"></span>
       </a>
 </span>
 
 
</div>
</form>
</div>
 <div class="container">
 
 <div id="all" class="tab-pane fade in active orderstatsbg">
      <table id="orderlist"><!-- class="table table-bordered"> -->
    <thead>
      <tr>
        <th>#</th>
        <th>Placed</th>
        <th>Order#</th>
        <th>Store</th>
        <th>Order Value</th>
        <th>Payment Status</th>
        <th>Delivery Status</th>
        <th>Order Status</th>
      </tr>
    </thead>
   
  </table>
  </div>
  
  <!-- <ul class="nav nav-tabs nav-justified" id="ordermenu">
    <li class="storeactive"><a data-toggle="tab" href="#all">ALL</a></li>
    <li><a data-toggle="tab" href="#open">OPEN</a></li>
    <li><a data-toggle="tab" href="#completed">COMPLETED</a></li>
    <li><a data-toggle="tab" href="#cancelled">CANCELLED</a></li>
  </ul> -->
 <!-- <div class="tab-content">
    <div id="all" class="tab-pane fade in active orderstatsbg">
      <table>class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Placed</th>
        <th>Order#</th>
        <th>Store</th>
        <th>Order Value</th>
        <th>Payment Status</th>
        <th>Delivery Status</th>
        <th>Order Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
       
      </tr>
      
    </tbody>
  </table>
  </div>
    <div id="open" class="tab-pane  orderstatsbg">
      <table> class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Order#</th>
        <th>Store</th>
        <th>Order Value</th>
        <th>Payment Status</th>
        <th>Delivery Status</th>
        <th>Order Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
       
      </tr>
      
    </tbody>
  </table>
    </div>
    <div id="completed" class="tab-pane fade  orderstatsbg">
      <table> class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Order#</th>
        <th>Store</th>
        <th>Order Value</th>
        <th>Payment Status</th>
        <th>Delivery Status</th>
        <th>Order Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
       
      </tr>
      
    </tbody>
  </table>
  </div>
    <div id="cancelled" class="tab-pane fade  orderstatsbg">
      <table> class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Order#</th>
        <th>Store</th>
        <th>Order Value</th>
        <th>Payment Status</th>
        <th>Delivery Status</th>
        <th>Order Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        
      </tr>
      
    </tbody>
  </table>
  </div>
  </div> -->
</div>

  </div>
 
</body>
<script>

document.getElementById("username").innerHTML=sessionStorage.getItem("firstname")+" "+sessionStorage.getItem("lastname");

$(".makeactive").click(function () {
	 
	  $(this).parent().toggleClass('active');
	 

  });
  
  
$("#logout").click(function(){ 
	
	sessionStorage.clear();
	location.href="product.jsp";
	
	
});
  

$.ajax({
	    url : 'rest/placeOrder/fetchOrder',
	    type: 'GET',
	    contentType: 'application/json; charset=utf-8',
	    dataType : 'json',
	    processData: true,
	    success: function(a,data)
	    {
	     
	      var menu,orderlist,menuHere,row='',i;
	      menu = eval('(' + JSON.stringify(a) + ')'); 
	      
	      orderlist = menu.orderid.length;
	      var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
	                        "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
	                      ];
	      
	     
	       for(i=0;i<orderlist;i++)
	    	   {
	    	  	 var j=i+1;
	    	  	 
	    	  	 var d = new Date(menu.date[i]);
	    	  	 
	    	  	 var orderdate = d.getDate()+'-'+months[d.getMonth()]+'-'+d.getFullYear();
		    	  row+=
		    	 '<tr align=\"center\"><td>'+j+'</td><td>'+orderdate+'</td><td><a href=\"orderdetails.html?oid='+menu.orderid[i]+'\">#'+menu.orderid[i]+'</a></td>'+
		    	 '<td>'+menu.storename[i]+'</td><td>$'+menu.price[i]+'</td><td>'+menu.pstat[i]+'</td><td>'+menu.dstat[i]+'</td><td>'+menu.ostat[i]+'</td></tr>';
		    	  
	    	   };
	       
	       
 	 $('#orderlist').append(row);
	    	
	    },
	    error: function(jqXHR, textStatus, errorThrown)
	    {
	    	alert(errorThrown);
	    	alert("Products not available");
	    }
	    
	});


</script>
</html>